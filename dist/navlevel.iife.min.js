(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".navlevel-popup[data-v-ce03094f]{position:relative}.navlevel-popup>div[data-v-ce03094f]{position:absolute;width:max-content;display:none;font-size:80%;top:0;left:0;background-color:var(--background-color, #ddd);border-radius:4px;padding:.5em;z-index:1;box-shadow:1px 1px 5px hsl(0 0 calc(100% * var(--rswiki-dark-mode-enabled, 0)))}li[data-v-d6156584]:hover .navlevel-popup>div,li[data-v-d6156584]:focus-within .navlevel-popup>div{display:block}.priority-sort[data-v-ca757e80]{display:flex;align-items:center;gap:var(--spacing-50, 8px);flex-wrap:wrap}.priority-chip[data-v-ca757e80]{display:inline-flex;align-items:center;padding:var(--spacing-25, 4px) var(--spacing-25, 4px);background-color:var(--background-color-base, #f8f9fa);border:1px solid var(--border-color-subtle, #c8ccd1);border-radius:var(--border-radius-base, 4px);color:var(--color-base, #202122);font-size:var(--font-size-small, .8125rem);font-weight:var(--font-weight-normal, 400);font-family:var(--font-family-system-sans, sans-serif);cursor:pointer;transition:all var(--transition-duration-base, .1s) var(--transition-timing-function-ease-in-out, ease-in-out);white-space:nowrap;-webkit-user-select:none;user-select:none}.priority-chip[data-v-ca757e80]:hover{background-color:var(--background-color-interactive-subtle, #eaecf0);border-color:var(--border-color-interactive, #72777d)}.priority-chip[data-v-ca757e80]:focus{outline:2px solid var(--color-progressive, #36c);outline-offset:2px}.priority-chip[data-v-ca757e80]:active{background-color:var(--background-color-interactive, #eaf3ff);border-color:var(--color-progressive, #36c)}.priority-arrow[data-v-ca757e80]{color:var(--color-subtle, #54595d);font-weight:var(--font-weight-bold, 700);margin:0 var(--spacing-25, 4px)}@media(max-width:768px){.priority-sort[data-v-ca757e80]{gap:var(--spacing-35, 6px)}.priority-arrow[data-v-ca757e80]{margin:0 var(--spacing-15, 2px)}}.navlevel-nav[data-v-85ced462]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.2em 1em}.navlevel-radio-group[data-v-85ced462]{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;padding:2px}a[role=button][data-v-85ced462]{cursor:pointer}.navlevel-sortable .navbox-title{z-index:1}.navbox.navlevel-sortable,.navlevel-sortable .navbox{overflow:visible!important}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();

/// <reference types="types-mediawiki" />
/// <reference types="types-mediawiki-api" />
mw.loader.using(["vue", "@wikimedia/codex", "ext.gadget.HanAssist"], function(require) {
  const vueModule = require("vue");
  const codexModule = require("@wikimedia/codex");
  
  
  const Vue = vueModule;
  const Codex = codexModule;
  
  // ÂéüÂßã‰ª£Á†Å
  (function(){"use strict";const J="rswiki:NavLevel-data",se="rswiki:NavLevel-levels",le="rswiki:NavLevel-difficulty",W="rswiki:NavLevel-expiry",Ve="rswiki:NavLevel-options",be="https://rs.miraheze.org/";async function H(){const o=await new mw.Api().get({action:"cargoquery",formatversion:2,tables:"Level, Version",fields:"Level.name_zh = name, Level.num = num, Level._pageName = page, Level.type = type, Level.stars = stars, Level.first_came_version = inVer, Level.removed_version = remVer, Level.restored_version = resVer, Level.award = award, Level.diamonds = dia, Version.date = inDate",where:"Level.stars IS NOT NULL AND(Level.type = 'ÂÆòÊñπ' OR Level.type = 'ÂÖ±Âàõ') AND Level._pageName NOT LIKE '%ÔºàÊóßÔºâ'",join_on:"Level.first_came_version = Version._pageName",limit:500});if(!o.cargoquery)return null;const s=o.cargoquery.map(a=>({num:Number(a.title.num),stars:Number(a.title.stars),inVer:a.title.inVer,remVer:a.title.remVer,resVer:a.title.resVer,inDate:a.title.inDate,type:a.title.type,page:a.title.page,name:a.title.name,award:a.title.award,dia:Number(a.title.dia)}));return s.length<210?null:s}async function Ue(){const o=localStorage.getItem(J);let s;try{if(!o)throw new Error("No data");s=JSON.parse(o)}catch{}const a=localStorage.getItem(W);if(a&&Number(a)&&Number(a)<Date.now()){console.log("Expired, fetching new data");const l=await H();return l?(localStorage.setItem(J,JSON.stringify(l)),localStorage.setItem(W,String(Date.now()+432e5)),l):s}return s||(s=await H(),s&&(localStorage.setItem(J,JSON.stringify(s)),localStorage.setItem(W,String(Date.now()+432e5))),s)}async function ie(){const o=await fetch(be+"wiki/Module:NavLevel/levels?action=raw");if(!o.ok)return null;const a=(await o.text()).replace(/^return\s+/,"").replace(/\{/g,"[").replace(/\}/g,"]").replace(/\-\-.*?\n/g,"");try{return JSON.parse(a)}catch{return null}}async function qe(){let o=mw.storage.getObject(se);return o||(o=await ie(),mw.storage.setObject(se,o,43200),o)}async function ue(){const o=await fetch(be+"wiki/Module:Difficulty/data.json?action=raw");if(!o.ok)return null;const s=await o.text();try{return JSON.parse(s)}catch{return null}}async function ze(){let o=mw.storage.getObject(le);return o||(o=await ue(),mw.storage.setObject(le,o,43200),o)}function Xe(o){mw.storage.setObject(Ve,o)}function Je(){const o=mw.storage.getObject(Ve);return o||null}function Ne(o){return mw.config.get("wgPageName").replace(/_/g," ")===o.replace(/_/g," ")}async function We(){const o=await ie(),s=await H(),a=await ue();return o&&mw.storage.setObject(se,o,43200),a&&mw.storage.setObject(le,a,43200),s&&(localStorage.setItem(J,JSON.stringify(s)),localStorage.setItem(W,String(Date.now()+432e5))),{levels:o,data:s,difficulty:a}}const Se=Object.freeze(Object.defineProperty({__proto__:null,fetchData:H,fetchDifficulty:ue,fetchLevels:ie,getData:Ue,getDifficulty:ze,getValidLevels:qe,hotPurge:We,isCurrentPage:Ne,loadOptionsFromStorage:Je,saveOptionsToStorage:Xe},Symbol.toStringTag,{value:"Module"}));let c;({convByVar:c}=require("ext.gadget.HanAssist"));const j=new Map;function He(o){for(const s of o){const a=s.textContent.trim(),l=decodeURI(s.href.split("wiki/")[1]);j.set(l,a),j.set(a,a),j.set(l.replace(/_/g," "),a),j.set(a.replace(/_/g," "),a)}}function Ge(o){return j.get(o)||o}function Ze(o){return c({hans:"ÂÖ±Âàõ",hant:"ÂÖ±Ââµ"})}const $e=mw.loader.getState("ext.gadget.separate-space")==="ready";function G(o){return $e?" "+o+" ":o}function O(o){return $e?o+" ":o}const Qe=Vue.defineComponent,et=Vue.renderSlot,tt=Vue.createElementVNode,nt=Vue.openBlock,ot=Vue.createElementBlock,rt=Vue.nextTick,at=Vue.onMounted,Ee=Vue.ref,st=Qe({__name:"Popup",props:{process:{type:Function}},setup(o){const s=o,a=Ee(null),l=Ee(null);return at(async()=>{await rt();const p=l.value,g=p.getBoundingClientRect();g.right>window.innerWidth&&(p.style.top="100%",p.style.left=`${window.innerWidth-g.right-15}px`),g.y<window.innerHeight/2&&(p.style.bottom="100%",p.style.top="unset"),s.process(p)}),(p,g)=>(nt(),ot("span",{class:"navlevel-popup",ref_key:"span",ref:a},[tt("div",{ref_key:"div",ref:l},[et(p.$slots,"default",{},void 0,!0)],512)],512))}}),Z=(o,s)=>{const a=o.__vccOpts||o;for(const[l,p]of s)a[l]=p;return a},lt=Z(st,[["__scopeId","data-v-ce03094f"]]),it=Vue.defineComponent,ut=Vue.renderList,ct=Vue.Fragment,A=Vue.openBlock,Y=Vue.createElementBlock,ce=Vue.unref,D=Vue.toDisplayString,pt=Vue.normalizeClass,I=Vue.createElementVNode,Q=Vue.createTextVNode,dt=Vue.createCommentVNode,ft=Vue.withCtx,vt=Vue.createBlock,mt={class:"hlist"},gt=["href","onMouseover","onTouchstart","onFocus","title"],ht={style:{"font-weight":"bold"}},yt={key:0,style:{"font-size":"120%"}},wt={key:1,style:{"font-size":"140%"}},_t=["href"];Vue.reactive;const Vt=Vue.ref,pe=Z(it({__name:"HList",props:{levels:{},usesMwNativePopup:{type:Boolean},showsBirthday:{type:Boolean},processPopup:{type:Function}},setup(o){const s=Ne;function a(m){return Ge(m.page)}const l=Vt(null);function p(m){setTimeout(()=>l.value=m,200)}function g(m){const v=m.inDate;if(v.startsWith("?"))return!1;const i=Number(v.substring(5,7)),f=Number(v.substring(8,10)),w=new Date().toLocaleDateString("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}),V=Number(w.substring(5,7)),N=Number(w.substring(8,10));return i===V&&f===N}function y(m){return m?m.toFixed?.(1)||m:"?.?"}function x(m){return m?m[2]?`${y(m[0])}/${y(m[1])}Ôºà${m[2]}Ôºâ`:`${y(m[0])}/${y(m[1])}`:"?.?/?.?"}return(m,v)=>(A(),Y("ul",mt,[(A(!0),Y(ct,null,ut(o.levels,i=>(A(),Y("li",null,[I("a",{href:ce(s)(i.page)?void 0:`/wiki/${encodeURI(i.page)}`,onMouseover:f=>p(i),onTouchstart:f=>p(i),onFocus:f=>p(i),class:pt(ce(s)(i.page)?"mw-selflink selflink":""),title:o.usesMwNativePopup?a(i):void 0},D(a(i))+D(o.showsBirthday&&g(i)?"üéÇ":""),43,gt),l.value===i?(A(),vt(lt,{key:0,process:f=>o.processPopup(i,f)},{default:ft(()=>[I("span",ht,D(`${i.type==="ÂÆòÊñπ"?"Lv.":"Co."}${i.num} ${a(i)} ${"‚òÖ".repeat(i.stars)}`),1),v[1]||(v[1]=I("br",null,null,-1)),Q(" "+D(`${i.award==="crown"?"3üëë ":i.award==="present"?"10üéÅ ":""}${i.dia}üíé`)+" ",1),v[2]||(v[2]=I("br",null,null,-1)),Array.isArray(i.difficulty?.[0])?(A(),Y("span",yt,[Q(D(x(i.difficulty[0])),1),v[0]||(v[0]=I("br",null,null,-1)),Q(" "+D(x(i.difficulty[1])),1)])):(A(),Y("span",wt,D(x(i.difficulty)),1)),v[3]||(v[3]=I("br",null,null,-1)),I("a",{href:"/wiki/"+i.inVer},D(i.inVer),9,_t),Q(D(`(${i.inDate||"????-??-??"})${ce(c)({hans:"ÁâàÊú¨Âä†ÂÖ•Ê∏∏Êàè",hant:"ÁâàÊú¨Âä†ÂÖ•ÈÅäÊà≤"})}`),1)]),_:2},1032,["process"])):dt("",!0)]))),256))]))}}),[["__scopeId","data-v-d6156584"]]),bt=Vue.useModel,ke=Vue.mergeModels,Nt=Vue.defineComponent,St=Vue.renderList,Le=Vue.Fragment,ee=Vue.openBlock,te=Vue.createElementBlock,$t=Vue.toDisplayString,Et=Vue.createElementVNode,kt=Vue.createCommentVNode,Lt={class:"priority-sort",role:"list","aria-label":"‰ºòÂÖàÁ∫ßÊéíÂ∫è"},xt=["onClick","onKeydown","aria-label"],Ct={key:0,class:"priority-arrow","aria-hidden":"true"};Vue.computed;const de=Vue.nextTick,Dt=Z(Nt({__name:"PrioritySort",props:ke({labelMap:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:ke(["update:modelValue"],["update:modelValue"]),setup(o,{emit:s}){const a=o,l=bt(o,"modelValue"),p=s,g=f=>a.labelMap[f]||f,y=(f,u)=>{m(f.currentTarget,u),p("update:modelValue",l.value)},x=(f,u)=>{const w=f.currentTarget;switch(f.key){case"Enter":case" ":f.preventDefault(),m(w,u);break;case"ArrowLeft":f.preventDefault(),v(w,u);break;case"ArrowRight":f.preventDefault(),i(w,u);break}p("update:modelValue",l.value)},m=(f,u)=>{if(u<=0)return;const[w]=l.value.splice(u,1);l.value.unshift(w);const V=f.parentElement;de(()=>{Array.from(V?.querySelectorAll(".priority-chip")||[])[0]?.focus()})},v=(f,u)=>{if(u<=0)return;const w=f.parentElement,V=l.value[u];l.value[u]=l.value[u-1],l.value[u-1]=V,de(()=>{Array.from(w?.querySelectorAll(".priority-chip")||[])[u-1]?.focus()})},i=(f,u)=>{if(u>=l.value.length-1)return;const w=f.parentElement,V=l.value[u];l.value[u]=l.value[u+1],l.value[u+1]=V,de(()=>{Array.from(w?.querySelectorAll(".priority-chip")||[])[u+1]?.focus()})};return(f,u)=>(ee(),te("div",Lt,[(ee(!0),te(Le,null,St(l.value,(w,V)=>(ee(),te(Le,{key:w},[Et("button",{type:"button",class:"priority-chip",onClick:N=>y(N,V),onKeydown:N=>x(N,V),"aria-label":`${g(w)}ÔºåÁÇπÂáªËÆæ‰∏∫Á¨¨‰∏Ä‰ºòÂÖàÁ∫ßÔºåÂ∑¶Âè≥ÁÆ≠Â§¥ÈîÆÁßªÂä®‰∏Ä‰Ωç`},$t(g(w)),41,xt),V<l.value.length-1?(ee(),te("span",Ct,">")):kt("",!0)],64))),128))]))}}),[["__scopeId","data-v-ca757e80"]]);function xe(o,s){return Object.keys(o).every(a=>s.hasOwnProperty(a))}function Ot(o,s,a,l,p){const g=[];if(window.NavLevel){if(window.NavLevel.Sorting&&window.NavLevel.sortingFunctions){if(!xe(window.NavLevel.sortingFunctions,window.NavLevel.Sorting))throw new Error("Sorting methods and functions do not match.");Object.assign(o,window.NavLevel.Sorting),Object.assign(s,window.NavLevel.sortingFunctions)}for(const y in o)a.includes(y)||a.push(y);if(window.NavLevel.Grouping&&window.NavLevel.groupingFunctions){if(!xe(window.NavLevel.groupingFunctions,window.NavLevel.Grouping))throw new Error("Grouping methods and functions do not match.");Object.assign(l,window.NavLevel.Grouping),Object.assign(p,window.NavLevel.groupingFunctions)}window.NavLevel.processPopup&&g.push(window.NavLevel.processPopup),console.log("Ê£ÄÊµãÂà∞window.NavLevelÔºåÂ∑≤ÂêàÂπ∂")}return window.NavLevel={Sorting:o,sortingFunctions:s,Grouping:l,groupingFunctions:p,set processPopup(y){g.push(y)}},(y,x)=>{g.forEach(m=>m(y,x))}}const Bt=Vue.defineComponent,S=Vue.createElementVNode,h=Vue.unref,E=Vue.toDisplayString,Ce=Vue.withModifiers,De=Vue.withKeys,C=Vue.createTextVNode,T=Vue.renderList,k=Vue.Fragment,_=Vue.openBlock,b=Vue.createElementBlock,K=Vue.withCtx,Oe=Vue.createBlock,P=Vue.createVNode,fe=Vue.normalizeClass,ne=Vue.createCommentVNode,It={class:"navbox-above navbox-cell navbox-sole-row"},Pt=["onKeydown"],Mt={class:"navbox-above navbox-cell navbox-sole-row navlevel-nav"},At={class:"navlevel-radio-group"},Tt={class:"navlevel-radio-group"},Ft={class:"navlevel-radio-group"},Rt={class:"navlevel-radio-group"},jt={class:"navlevel-radio-group"},Yt={class:"navbox-group navbox-cell"},Kt=["title"],Ut={key:0,class:"navbox-group navbox-cell"},qt=["title"],zt={key:1,class:"navbox navbox-list navbox-cell navbox-level-1 mobileplainbox"},Xt={key:0,class:"navbox-group navbox-cell"},Jt=["title"],Be=Codex.CdxCheckbox,ve=Codex.CdxRadio,Wt=Vue.onBeforeUpdate,Ht=Vue.onMounted,Ie=Vue.reactive,L=Vue.ref,Pe=Vue.watch,Gt=Z(Bt({__name:"Main",props:{recvData:{},recvLevels:{},recvDifficulty:{},preserveElements:{},preserveBeforeElements:{},titleElement:{}},setup(o){const s=Se,{saveOptionsToStorage:a,loadOptionsFromStorage:l}=s,p=o,g=L(p.recvData),y=L(p.recvLevels),x=p.recvDifficulty;function m(t,e){for(const r of t){const n=r.page;r.difficulty=e[n]}return t}m(g.value,x);const v=Ie({type:c({hans:"Á±ªÂûã",hant:"È°ûÂûã"}),era:c({hans:"Êó∂Êúü",hant:"ÊôÇÊúü"}),stars:c({hans:"ÊòüÊï∞",hant:"ÊòüÊï∏"}),version:c({hans:"ÁâàÊú¨",hant:"ÁâàÊú¨"}),present:c({hans:"Â•ñÂä±ÊñπÂºè",hant:"ÁçéÂãµÊñπÂºè"}),year:c({hans:"Âπ¥‰ªΩ",hant:"Âπ¥‰ªΩ"}),completeDifficulty:c({hans:"ÂÆåÊàêÈöæÂ∫¶",hant:"ÂÆåÊàêÈõ£Â∫¶"}),perfectDifficulty:c({hans:"ÂÆåÁæéÈöæÂ∫¶",hant:"ÂÆåÁæéÈõ£Â∫¶"}),none:c({hans:"Êó†",hant:"ÁÑ°"})});Pe(v,()=>{Promise.resolve().then(B)});const i=Ie({num:c({hans:"ÁºñÂè∑",hant:"Á∑®Ëôü"}),name:c({hans:"ÂêçÁß∞",hant:"ÂêçÁ®±"}),stars:c({hans:"ÊòüÊï∞",hant:"ÊòüÊï∏"}),date:c({hans:"Êó•Êúü",hant:"Êó•Êúü"}),completeDifficulty:c({hans:"ÂÆåÊàêÈöæÂ∫¶",hant:"ÂÆåÊàêÈõ£Â∫¶"}),perfectDifficulty:c({hans:"ÂÆåÁæéÈöæÂ∫¶",hant:"ÂÆåÁæéÈõ£Â∫¶"}),default:c({hans:"ÈªòËÆ§",hant:"È†êË®≠"})});Pe(i,()=>{Promise.resolve().then(B)});const f={asc:"ÂçáÂ∫è",desc:"ÈôçÂ∫è"},u=l();function w(t){return t in i}function V(t){return t in f}const N=L(u?.grouping1??"type"),M=L(u?.grouping2??"stars"),Me=(t,e)=>t in v?t:e,oe=L(u?.direction&&V(u.direction)?u.direction:"asc"),U=L(!1),F=L(u?.showsBirthday??!1),Ae=["default","num","date","name","stars"],q=L(u?.sortingPriority??Ae),Qt=t=>t.some(e=>!w(e))?Ae:(t.length!==Object.keys(i).length&&t.push(...Object.keys(i).filter(e=>!t.includes(e))),t),z=L(null),X=L(null),R=L({});Ht(()=>{if(X.value&&p.preserveBeforeElements?.length){let t=X.value;p.preserveBeforeElements.forEach(e=>{e&&t.parentNode&&(t.parentNode.insertBefore(e,t),t=e)})}if(z.value&&p.preserveElements?.length){let t=z.value;p.preserveElements.forEach(e=>{e&&t&&t.parentNode&&(t.parentNode.insertBefore(e,t.nextSibling),t=e)})}z.value&&z.value.remove(),X.value&&X.value.remove(),B()});function en(t){return je[t]||(()=>0)}function Te(t,e){const r=Qt(q.value);for(let n=0;n<r.length;n++){const d=en(r[n])(t,e);if(d!==0)return d*(oe.value==="asc"?1:-1)}return 0}function Fe(t,e){return Array.isArray(t)?t[e]:t}function re(t,e){const r=t.difficulty,n=Fe(r[e],0);return n?typeof n=="string"?parseInt(n):Math.floor(n):t.stars}function ae(t,e){const r=t.difficulty,n=Fe(r[e],0);return n?typeof n=="string"?parseInt(n)-.01:n:t.stars-.01}const Re={era(t){return[{group:"Ëæ£Ê§í",list:t.filter(e=>e.type==="ÂÆòÊñπ"&&e.num<=7)},{group:c({hans:"ÁåéË±π",hant:"ÁçµË±π"}),list:t.filter(e=>e.type==="ÂÆòÊñπ"&&e.num>7&&e.num<=94)},{group:c({hans:"Á±≥È∫¶",hant:"Á±≥È∫•"}),list:t.filter(e=>e.type==="ÂÖ±Âàõ"||e.type==="ÂÆòÊñπ"&&e.num>94)}]},version(t){const e=new Set;return t.forEach(n=>e.add(n.inVer.substring(0,1))),e.has("2")&&e.delete("3"),Array.from(e).sort((n,d)=>n.localeCompare(d)).map(n=>({group:n==="2"?"2.x / 3.x":n+".x",list:n==="2"?t.filter(d=>d.inVer.startsWith("2")||d.inVer.startsWith("3")):t.filter(d=>d.inVer.startsWith(n))}))},type(t){return[{group:"ÂÆòÊñπ",list:t.filter(e=>e.type==="ÂÆòÊñπ")},{group:Ze(),list:t.filter(e=>e.type==="ÂÖ±Âàõ")}]},stars(t){const e=new Set;return t.forEach(n=>e.add(n.stars)),Array.from(e).sort((n,d)=>n-d).map(n=>({group:O(n.toString())+"Êòü",list:t.filter(d=>d.stars===n)}))},year(t){const e=new Set;t.forEach(d=>e.add(d.inDate.substring(0,4)));const r=new Set;return e.forEach(d=>{d.trim()===""&&r.add(d)}),r.forEach(d=>e.delete(d)),Array.from(e).sort((d,_e)=>parseInt(d)-parseInt(_e)).map(d=>({group:d,list:t.filter(_e=>_e.inDate.startsWith(d))}))},present(t){const e=t.filter(n=>!["crown","present","none"].includes(n.award)),r=[{group:"ÁöáÂÜ†",list:t.filter(n=>n.award==="crown")},{group:"Á•ûÁßòÁÆ±",list:t.filter(n=>n.award==="present")},{group:c({hans:"Êó†",hant:"ÁÑ°"}),list:t.filter(n=>n.award==="none")}];return e.length>0&&r.push({group:c({hans:"Êú™Áü•",hant:"Êú™Áü•"}),list:e}),r},completeDifficulty(t){const e=new Set;for(const r of t)e.add(re(r,0));return Array.from(e).sort((r,n)=>r-n).map(r=>({group:r+".x",list:t.filter(n=>re(n,0)===r)}))},perfectDifficulty(t){const e=new Set;for(const r of t)e.add(re(r,1));return Array.from(e).sort((r,n)=>r-n).map(r=>({group:r+".x",list:t.filter(n=>re(n,1)===r)}))},none(t){return t}},je={num:(t,e)=>t.type===e.type?t.num-e.num:t.type==="ÂÆòÊñπ"?-1:1,name:(t,e)=>t.name.localeCompare(e.name),stars:(t,e)=>t.stars-e.stars,date:(t,e)=>t.inDate.localeCompare(e.inDate),completeDifficulty:(t,e)=>ae(t,0)-ae(e,0),perfectDifficulty:(t,e)=>ae(t,1)-ae(e,1),default:(t,e)=>{const r=y.value;return r.indexOf(t.page)-r.indexOf(e.page)}},me=Ot(i,je,q.value,v,Re);function tn(t,e){return Re[e](t)}function ge(t,e){return tn(t,e).map(r=>(r.list=r.list.sort(Te),r))}let Ye=0;const nn=()=>{Ye=0};function Ke(){a({grouping1:N.value,grouping2:M.value,sortingPriority:q.value,direction:oe.value,showsBirthday:F.value})}function B(){console.log("Sorting...");const t=Me(N.value,"type");let e=Me(M.value,"stars");t===e&&e!=="none"&&(M.value=e=t==="stars"?"type":"stars"),t==="none"&&(M.value="none"),Ke();const r=g.value;if(t==="none"){R.value=[...r].sort(Te);return}else e==="none"?R.value=ge(r,t):R.value=ge(r,t).map(n=>(n.list=ge(n.list,e),n))}function he(){return++Ye%2?"navbox-odd":"navbox-even"}async function ye(){const{levels:t,data:e,difficulty:r}=await s.hotPurge();t?y.value=t:mw.notify(c({hans:"Ëé∑ÂèñÂêàÊ≥ïÂÖ≥Âç°ÂàóË°®Â§±Ë¥•„ÄÇ",hant:"Áç≤ÂèñÂêàÊ≥ïÈóúÂç°ÂàóË°®Â§±Êïó„ÄÇ"}),{type:"error"}),e?g.value=m(e,r):mw.notify(c({hans:`Ëé∑ÂèñÂÖ≥Âç°${G("Cargo")}Êï∞ÊçÆÂ§±Ë¥•„ÄÇ`,hant:`Áç≤ÂèñÈóúÂç°${G("Cargo")}Êï∏ÊìöÂ§±Êïó„ÄÇ`}),{type:"error"}),(t||e)&&mw?.notify?.(c({hans:`Êï∞ÊçÆÂ∑≤Êõ¥Êñ∞„ÄÇ${O(g.value.length)}Êù°Êï∞ÊçÆËÆ∞ÂΩïÔºå${O(y.value.length)}‰∏™ÂÖ≥Âç°„ÄÇ`,hant:`Êï∏ÊìöÂ∑≤Êõ¥Êñ∞„ÄÇ${O(g.value.length)}Ê¢ùÊï∏ÊìöË®òÈåÑÔºå${O(y.value.length)}ÂÄãÈóúÂç°„ÄÇ`})),B()}Wt(()=>{nn()});const we=c({hans:"ÂÖ≥",hant:"Èóú"});return(t,e)=>(_(),b(k,null,[S("div",{ref_key:"markerBefore",ref:X},null,512),S("div",It,[C(E(h(c)({hans:`Êú¨Êô∫ËÉΩÊéíÂ∫è‰∏∫ÂÆûÈ™åÊÄßÂäüËÉΩ„ÄÇÂΩìÂâçËé∑ÂèñÂà∞${h(G)(g.value.length)}‰∏™ÂÖ≥Âç°ÁöÑÊï∞ÊçÆ„ÄÇ`,hant:`Êú¨Êô∫ËÉΩÊéíÂ∫èÁÇ∫ÂØ¶È©óÊÄßÂäüËÉΩ„ÄÇÁï∂ÂâçÁç≤ÂèñÂà∞${h(G)(g.value.length)}ÂÄãÈóúÂç°ÁöÑÊï∏Êìö„ÄÇ`}))+" Ôºà",1),S("a",{onClick:ye,onKeydown:[De(Ce(ye,["prevent"]),["enter"]),De(Ce(ye,["prevent"]),["space"])],role:"button",tabindex:"0"},E(h(c)({hans:"Ê∏ÖÈô§ÁºìÂ≠ò",hant:"Ê∏ÖÈô§Âø´Âèñ"})),41,Pt),e[8]||(e[8]=C("Ôºâ ",-1))]),S("div",Mt,[S("div",At,[C(E(h(c)({hans:"‰∏ÄÁ∫ßÂàÜÁªÑÔºö",hant:"‰∏ÄÁ¥öÂàÜÁµÑÔºö"}))+" ",1),(_(!0),b(k,null,T(v,(r,n)=>(_(),Oe(h(ve),{"model-value":N.value,"onUpdate:modelValue":[e[0]||(e[0]=d=>N.value=d),B],"input-value":n,name:"grouping1",inline:!0},{default:K(()=>[C(E(v[n]),1)]),_:2},1032,["model-value","input-value"]))),256))]),S("div",Tt,[C(E(h(c)({hans:"‰∫åÁ∫ßÂàÜÁªÑÔºö",hant:"‰∫åÁ¥öÂàÜÁµÑÔºö"}))+" ",1),(_(!0),b(k,null,T(v,(r,n)=>(_(),Oe(h(ve),{"model-value":M.value,"onUpdate:modelValue":[e[1]||(e[1]=d=>M.value=d),B],"input-value":n,name:"grouping2",inline:!0,disabled:n!==N.value==(N.value==="none")},{default:K(()=>[C(E(v[n]),1)]),_:2},1032,["model-value","input-value","disabled"]))),256))]),S("div",Ft,[C(E(h(c)({hans:"ÊéíÂ∫èÔºö",hant:"ÊéíÂ∫èÔºö"}))+" ",1),P(Dt,{modelValue:q.value,"onUpdate:modelValue":[e[2]||(e[2]=r=>q.value=r),e[3]||(e[3]=r=>B())],"label-map":i},null,8,["modelValue","label-map"])]),S("div",Rt,[(_(),b(k,null,T(f,(r,n)=>P(h(ve),{name:"direction","input-value":n,"model-value":oe.value,"onUpdate:modelValue":[e[4]||(e[4]=d=>oe.value=d),B],inline:!0},{default:K(()=>[C(E(f[n]),1)]),_:2},1032,["input-value","model-value"])),64))]),S("div",jt,[P(h(Be),{inline:!0,"model-value":U.value,"onUpdate:modelValue":e[5]||(e[5]=r=>U.value=r)},{default:K(()=>[C(E(h(c)({hans:"ÊòæÁ§∫MediaWikiÂéüÁîüÂºπÂá∫Ê°Ü",hant:"È°ØÁ§∫MediaWikiÂéüÁîüÂΩàÂá∫Ê°Ü"})),1)]),_:1},8,["model-value"]),P(h(Be),{inline:!0,"model-value":F.value,"onUpdate:modelValue":[e[6]||(e[6]=r=>F.value=r),e[7]||(e[7]=r=>Ke())]},{default:K(()=>[C(E(h(c)({hans:"Ê†áËÆ∞ÁîüÊó•Âú®‰ªäÊó•ÔºàUTC+8ÔºâÁöÑÂÖ≥Âç°",hant:"Ê®ôË®òÁîüÊó•Âú®‰ªäÊó•ÔºàÊåâUTC+8ÔºâÁöÑÈóúÂç°"})),1)]),_:1},8,["model-value"])])]),N.value==="none"?(_(),b("div",{key:0,class:fe("navbox-list navbox-sole-row "+he())},[P(pe,{levels:R.value,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":h(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)):(_(),b(k,{key:1},[M.value==="none"?(_(!0),b(k,{key:0},T(R.value,r=>(_(),b(k,null,[S("div",Yt,[S("span",{class:"navbox-group-flex-inner",title:`${h(O)(r.list.length)}${h(we)}`},E(r.group),9,Kt)]),S("div",{class:fe("navbox-list navbox-cell "+he())},[P(pe,{levels:r.list,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":h(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)],64))),256)):(_(!0),b(k,{key:1},T(R.value,r=>(_(),b(k,null,[r.list.length>0?(_(),b("div",Ut,[S("span",{class:"navbox-group-flex-inner",title:`${h(O)(r.list.reduce((n,d)=>n+d.list.length,0))}${h(we)}`},E(r.group),9,qt)])):ne("",!0),r.list.length>0?(_(),b("div",zt,[(_(!0),b(k,null,T(r.list,n=>(_(),b(k,null,[n.list.length>0?(_(),b("div",Xt,[S("span",{class:"navbox-group-flex-inner",title:`${h(O)(n.list.length)}${h(we)}`},E(n.group),9,Jt)])):ne("",!0),n.list.length>0?(_(),b("div",{key:1,class:fe("navbox-list navbox-cell "+he())},[P(pe,{levels:n.list,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":h(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)):ne("",!0)],64))),256))])):ne("",!0)],64))),256))],64)),S("div",{ref_key:"mark",ref:z},null,512)],64))}}),[["__scopeId","data-v-85ced462"]]);async function Zt(){const o=Se,{getData:s,getValidLevels:a,getDifficulty:l}=o;try{const[p,g,y]=await Promise.all([s(),a(),l()]);if(!p||!g){mw.notify("Failed to fetch qualified data",{type:"error"});return}const x=document.querySelectorAll(".navlevel-sortable:not(.navlevel-sortable-processed)");$.each(x,async(m,v)=>{He(Array.from(v.querySelectorAll("a[href]")));const i=Array.from(v.querySelectorAll(".navlevel-sortable-preserve")),f=Array.from(v.querySelectorAll(".navlevel-sortable-preserve-before"));[...i,...f].forEach(V=>{V.parentNode&&V.parentNode.removeChild(V)});const u=$(v);u.empty(),u.addClass("navlevel-sortable-processed"),Vue.createApp(Gt,{recvData:p,recvLevels:g,recvDifficulty:y,preserveElements:i,preserveBeforeElements:f,titleElement:v.querySelector(".navbox-title")||document.createElement("div")}).mount(v)})}catch(p){console.error("Failed to initialize NavLevel:",p),mw.notify("Failed to initialize NavLevel: "+p.message,{type:"error"})}}mw.hook("wikipage.content").add(Zt)})();

  
});

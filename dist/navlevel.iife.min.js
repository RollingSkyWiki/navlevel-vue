(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".navlevel-popup[data-v-ce03094f]{position:relative}.navlevel-popup>div[data-v-ce03094f]{position:absolute;width:max-content;display:none;font-size:80%;top:0;left:0;background-color:var(--background-color, #ddd);border-radius:4px;padding:.5em;z-index:1;box-shadow:1px 1px 5px hsl(0 0 calc(100% * var(--rswiki-dark-mode-enabled, 0)))}li[data-v-666cfac4]:hover .navlevel-popup>div,li[data-v-666cfac4]:focus-within .navlevel-popup>div{display:block}.priority-sort[data-v-ca757e80]{display:flex;align-items:center;gap:var(--spacing-50, 8px);flex-wrap:wrap}.priority-chip[data-v-ca757e80]{display:inline-flex;align-items:center;padding:var(--spacing-25, 4px) var(--spacing-25, 4px);background-color:var(--background-color-base, #f8f9fa);border:1px solid var(--border-color-subtle, #c8ccd1);border-radius:var(--border-radius-base, 4px);color:var(--color-base, #202122);font-size:var(--font-size-small, .8125rem);font-weight:var(--font-weight-normal, 400);font-family:var(--font-family-system-sans, sans-serif);cursor:pointer;transition:all var(--transition-duration-base, .1s) var(--transition-timing-function-ease-in-out, ease-in-out);white-space:nowrap;-webkit-user-select:none;user-select:none}.priority-chip[data-v-ca757e80]:hover{background-color:var(--background-color-interactive-subtle, #eaecf0);border-color:var(--border-color-interactive, #72777d)}.priority-chip[data-v-ca757e80]:focus{outline:2px solid var(--color-progressive, #36c);outline-offset:2px}.priority-chip[data-v-ca757e80]:active{background-color:var(--background-color-interactive, #eaf3ff);border-color:var(--color-progressive, #36c)}.priority-arrow[data-v-ca757e80]{color:var(--color-subtle, #54595d);font-weight:var(--font-weight-bold, 700);margin:0 var(--spacing-25, 4px)}@media(max-width:768px){.priority-sort[data-v-ca757e80]{gap:var(--spacing-35, 6px)}.priority-arrow[data-v-ca757e80]{margin:0 var(--spacing-15, 2px)}}.navlevel-nav[data-v-b1b3cf36]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.2em 1em}.navlevel-radio-group[data-v-b1b3cf36]{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;padding:2px}a[role=button][data-v-b1b3cf36]{cursor:pointer}.navlevel-sortable .navbox-title{z-index:1}.navbox.navlevel-sortable,.navlevel-sortable .navbox{overflow:visible!important}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();

/// <reference types="types-mediawiki" />
/// <reference types="types-mediawiki-api" />
mw.loader.using(["vue", "@wikimedia/codex", "ext.gadget.HanAssist"], function(require) {
  const vueModule = require("vue");
  const codexModule = require("@wikimedia/codex");
  
  
  const Vue = vueModule;
  const Codex = codexModule;
  
  // ÂéüÂßã‰ª£Á†Å
  (function(){"use strict";const J="rswiki:NavLevel-data",ae="rswiki:NavLevel-levels",le="rswiki:NavLevel-difficulty",W="rswiki:NavLevel-expiry",Ve="rswiki:NavLevel-options",be="https://rs.miraheze.org/";async function H(){const n=await new mw.Api().get({action:"cargoquery",formatversion:2,tables:"Level, Version",fields:"Level.name_zh = name, Level.num = num, Level._pageName = page, Level.type = type, Level.stars = stars, Level.first_came_version = inVer, Level.removed_version = remVer, Level.restored_version = resVer, Level.award = award, Level.diamonds = dia, Version.date = inDate",where:"Level.stars IS NOT NULL AND(Level.type = 'ÂÆòÊñπ' OR Level.type = 'ÂÖ±Âàõ') AND Level._pageName NOT LIKE '%ÔºàÊóßÔºâ'",join_on:"Level.first_came_version = Version._pageName",limit:500});if(!n.cargoquery)return null;const i=n.cargoquery.map(a=>({num:Number(a.title.num),stars:Number(a.title.stars),inVer:a.title.inVer,remVer:a.title.remVer,resVer:a.title.resVer,inDate:a.title.inDate,type:a.title.type,page:a.title.page,name:a.title.name,award:a.title.award,dia:Number(a.title.dia)}));return i.length<210?null:i}async function Ue(){const n=localStorage.getItem(J);let i;try{if(!n)throw new Error("No data");i=JSON.parse(n)}catch{}const a=localStorage.getItem(W);if(a&&Number(a)&&Number(a)<Date.now()){console.log("Expired, fetching new data");const u=await H();return u?(localStorage.setItem(J,JSON.stringify(u)),localStorage.setItem(W,String(Date.now()+432e5)),u):i}return i||(i=await H(),i&&(localStorage.setItem(J,JSON.stringify(i)),localStorage.setItem(W,String(Date.now()+432e5))),i)}async function ie(){const n=await fetch(be+"wiki/Module:NavLevel/levels?action=raw");if(!n.ok)return null;const a=(await n.text()).replace(/^return\s+/,"").replace(/\{/g,"[").replace(/\}/g,"]").replace(/\-\-.*?\n/g,"");try{return JSON.parse(a)}catch{return null}}async function qe(){let n=mw.storage.getObject(ae);return n||(n=await ie(),mw.storage.setObject(ae,n,43200),n)}async function ue(){const n=await fetch(be+"wiki/Module:Difficulty/data.json?action=raw");if(!n.ok)return null;const i=await n.text();try{return JSON.parse(i)}catch{return null}}async function ze(){let n=mw.storage.getObject(le);return n||(n=await ue(),mw.storage.setObject(le,n,43200),n)}function Xe(n){mw.storage.setObject(Ve,n)}function Je(){const n=mw.storage.getObject(Ve);return n||null}function Ne(n){return mw.config.get("wgPageName").replace(/_/g," ")===n.replace(/_/g," ")}async function We(){const n=await ie(),i=await H(),a=await ue();return n&&mw.storage.setObject(ae,n,43200),a&&mw.storage.setObject(le,a,43200),i&&(localStorage.setItem(J,JSON.stringify(i)),localStorage.setItem(W,String(Date.now()+432e5))),{levels:n,data:i,difficulty:a}}const Se=Object.freeze(Object.defineProperty({__proto__:null,fetchData:H,fetchDifficulty:ue,fetchLevels:ie,getData:Ue,getDifficulty:ze,getValidLevels:qe,hotPurge:We,isCurrentPage:Ne,loadOptionsFromStorage:Je,saveOptionsToStorage:Xe},Symbol.toStringTag,{value:"Module"}));let p;({convByVar:p}=require("ext.gadget.HanAssist"));const j=new Map;function He(n){for(const i of n){const a=i.textContent.trim(),u=decodeURI(i.href.split("wiki/")[1]);j.set(u,a),j.set(a,a),j.set(u.replace(/_/g," "),a),j.set(a.replace(/_/g," "),a)}}function Ge(n){return j.get(n)||n}function Ze(n){return p({hans:"ÂÖ±Âàõ",hant:"ÂÖ±Ââµ"})}const $e=mw.loader.getState("ext.gadget.separate-space")==="ready";function G(n){return $e?" "+n+" ":n}function B(n){return $e?n+" ":n}const Qe=Vue.defineComponent,et=Vue.renderSlot,tt=Vue.createElementVNode,nt=Vue.openBlock,ot=Vue.createElementBlock,rt=Vue.nextTick,st=Vue.onMounted,Ee=Vue.ref,at=Qe({__name:"Popup",props:{process:{type:Function}},setup(n){const i=n,a=Ee(null),u=Ee(null);return st(async()=>{await rt();const d=u.value,v=d.getBoundingClientRect();v.right>window.innerWidth&&(d.style.top="100%",d.style.left=`${window.innerWidth-v.right-15}px`),v.y<window.innerHeight/2&&(d.style.bottom="100%",d.style.top="unset"),i.process(d)}),(d,v)=>(nt(),ot("span",{class:"navlevel-popup",ref_key:"span",ref:a},[tt("div",{ref_key:"div",ref:u},[et(d.$slots,"default",{},void 0,!0)],512)],512))}}),Z=(n,i)=>{const a=n.__vccOpts||n;for(const[u,d]of i)a[u]=d;return a},lt=Z(at,[["__scopeId","data-v-ce03094f"]]),it=Vue.defineComponent,ut=Vue.renderList,ct=Vue.Fragment,A=Vue.openBlock,Y=Vue.createElementBlock,ce=Vue.unref,D=Vue.toDisplayString,pt=Vue.normalizeClass,P=Vue.createElementVNode,Q=Vue.createTextVNode,dt=Vue.createCommentVNode,ft=Vue.withCtx,vt=Vue.createBlock,mt={class:"hlist"},gt=["href","onMouseover","onTouchstart","onFocus","title"],ht={style:{"font-weight":"bold"}},yt={key:0,style:{"font-size":"120%"}},wt={key:1,style:{"font-size":"140%"}},_t=["href"];Vue.reactive;const Vt=Vue.ref,pe=Z(it({__name:"HList",props:{levels:{},usesMwNativePopup:{type:Boolean},showsBirthday:{type:Boolean},processPopup:{type:Function}},setup(n){const i=Ne,a=n;function u(c){return Ge(c.page)}const d=Vt(null);function v(c){setTimeout(()=>d.value=c,200)}function w(c){const m=c.inDate;if(m.startsWith("?"))return!1;const s=Number(m.substring(5,7)),l=Number(m.substring(8,10)),y=new Date().toLocaleDateString("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}),b=Number(y.substring(5,7)),O=Number(y.substring(8,10));return s===b&&l===O}function E(c){return c?c.toFixed?.(1)||c:"?.?"}function k(c){return console.log(c),c?c[2]?`${E(c[0])}/${E(c[1])}Ôºà${c[2]}Ôºâ`:`${E(c[0])}/${E(c[1])}`:"?.?/?.?"}return console.log(a.levels),(c,m)=>(A(),Y("ul",mt,[(A(!0),Y(ct,null,ut(n.levels,s=>(A(),Y("li",null,[P("a",{href:ce(i)(s.page)?void 0:`/wiki/${encodeURI(s.page)}`,onMouseover:l=>v(s),onTouchstart:l=>v(s),onFocus:l=>v(s),class:pt(ce(i)(s.page)?"mw-selflink selflink":""),title:n.usesMwNativePopup?u(s):void 0},D(u(s))+D(n.showsBirthday&&w(s)?"üéÇ":""),43,gt),d.value===s?(A(),vt(lt,{key:0,process:l=>n.processPopup(s,l)},{default:ft(()=>[P("span",ht,D(`${s.type==="ÂÆòÊñπ"?"Lv.":"Co."}${s.num} ${u(s)} ${"‚òÖ".repeat(s.stars)}`),1),m[1]||(m[1]=P("br",null,null,-1)),Q(" "+D(`${s.award==="crown"?"3üëë ":s.award==="present"?"10üéÅ ":""}${s.dia}üíé`)+" ",1),m[2]||(m[2]=P("br",null,null,-1)),Array.isArray(s.difficulty?.[0])?(A(),Y("span",yt,[Q(D(k(s.difficulty[0])),1),m[0]||(m[0]=P("br",null,null,-1)),Q(" "+D(k(s.difficulty[1])),1)])):(A(),Y("span",wt,D(k(s.difficulty)),1)),m[3]||(m[3]=P("br",null,null,-1)),P("a",{href:"/wiki/"+s.inVer},D(s.inVer),9,_t),Q(D(`(${s.inDate||"????-??-??"})${ce(p)({hans:"ÁâàÊú¨Âä†ÂÖ•Ê∏∏Êàè",hant:"ÁâàÊú¨Âä†ÂÖ•ÈÅäÊà≤"})}`),1)]),_:2},1032,["process"])):dt("",!0)]))),256))]))}}),[["__scopeId","data-v-666cfac4"]]),bt=Vue.useModel,ke=Vue.mergeModels,Nt=Vue.defineComponent,St=Vue.renderList,Le=Vue.Fragment,ee=Vue.openBlock,te=Vue.createElementBlock,$t=Vue.toDisplayString,Et=Vue.createElementVNode,kt=Vue.createCommentVNode,Lt={class:"priority-sort",role:"list","aria-label":"‰ºòÂÖàÁ∫ßÊéíÂ∫è"},xt=["onClick","onKeydown","aria-label"],Ct={key:0,class:"priority-arrow","aria-hidden":"true"};Vue.computed;const de=Vue.nextTick,Dt=Z(Nt({__name:"PrioritySort",props:ke({labelMap:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:ke(["update:modelValue"],["update:modelValue"]),setup(n,{emit:i}){const a=n,u=bt(n,"modelValue"),d=i,v=s=>a.labelMap[s]||s,w=(s,l)=>{k(s.currentTarget,l),d("update:modelValue",u.value)},E=(s,l)=>{const _=s.currentTarget;switch(s.key){case"Enter":case" ":s.preventDefault(),k(_,l);break;case"ArrowLeft":s.preventDefault(),c(_,l);break;case"ArrowRight":s.preventDefault(),m(_,l);break}d("update:modelValue",u.value)},k=(s,l)=>{if(l<=0)return;const[_]=u.value.splice(l,1);u.value.unshift(_);const y=s.parentElement;de(()=>{Array.from(y?.querySelectorAll(".priority-chip")||[])[0]?.focus()})},c=(s,l)=>{if(l<=0)return;const _=s.parentElement,y=u.value[l];u.value[l]=u.value[l-1],u.value[l-1]=y,de(()=>{Array.from(_?.querySelectorAll(".priority-chip")||[])[l-1]?.focus()})},m=(s,l)=>{if(l>=u.value.length-1)return;const _=s.parentElement,y=u.value[l];u.value[l]=u.value[l+1],u.value[l+1]=y,de(()=>{Array.from(_?.querySelectorAll(".priority-chip")||[])[l+1]?.focus()})};return(s,l)=>(ee(),te("div",Lt,[(ee(!0),te(Le,null,St(u.value,(_,y)=>(ee(),te(Le,{key:_},[Et("button",{type:"button",class:"priority-chip",onClick:b=>w(b,y),onKeydown:b=>E(b,y),"aria-label":`${v(_)}ÔºåÁÇπÂáªËÆæ‰∏∫Á¨¨‰∏Ä‰ºòÂÖàÁ∫ßÔºåÂ∑¶Âè≥ÁÆ≠Â§¥ÈîÆÁßªÂä®‰∏Ä‰Ωç`},$t(v(_)),41,xt),y<u.value.length-1?(ee(),te("span",Ct,">")):kt("",!0)],64))),128))]))}}),[["__scopeId","data-v-ca757e80"]]);function xe(n,i){return Object.keys(n).every(a=>i.hasOwnProperty(a))}function Ot(n,i,a,u,d){const v=[];if(window.NavLevel){if(window.NavLevel.Sorting&&window.NavLevel.sortingFunctions){if(!xe(window.NavLevel.sortingFunctions,window.NavLevel.Sorting))throw new Error("Sorting methods and functions do not match.");Object.assign(n,window.NavLevel.Sorting),Object.assign(i,window.NavLevel.sortingFunctions)}for(const w in n)a.includes(w)||a.push(w);if(window.NavLevel.Grouping&&window.NavLevel.groupingFunctions){if(!xe(window.NavLevel.groupingFunctions,window.NavLevel.Grouping))throw new Error("Grouping methods and functions do not match.");Object.assign(u,window.NavLevel.Grouping),Object.assign(d,window.NavLevel.groupingFunctions)}window.NavLevel.processPopup&&v.push(window.NavLevel.processPopup),console.log("Ê£ÄÊµãÂà∞window.NavLevelÔºåÂ∑≤ÂêàÂπ∂")}return window.NavLevel={Sorting:n,sortingFunctions:i,Grouping:u,groupingFunctions:d,set processPopup(w){v.push(w)}},(w,E)=>{v.forEach(k=>k(w,E))}}const Bt=Vue.defineComponent,N=Vue.createElementVNode,g=Vue.unref,S=Vue.toDisplayString,Ce=Vue.withModifiers,De=Vue.withKeys,C=Vue.createTextVNode,T=Vue.renderList,L=Vue.Fragment,h=Vue.openBlock,V=Vue.createElementBlock,K=Vue.withCtx,Oe=Vue.createBlock,M=Vue.createVNode,fe=Vue.normalizeClass,ne=Vue.createCommentVNode,It={class:"navbox-above navbox-cell navbox-sole-row"},Pt=["onKeydown"],Mt={class:"navbox-above navbox-cell navbox-sole-row navlevel-nav"},At={class:"navlevel-radio-group"},Tt={class:"navlevel-radio-group"},Ft={class:"navlevel-radio-group"},Rt={class:"navlevel-radio-group"},jt={class:"navlevel-radio-group"},Yt={class:"navbox-group navbox-cell"},Kt=["title"],Ut={key:0,class:"navbox-group navbox-cell"},qt=["title"],zt={key:1,class:"navbox navbox-list navbox-cell navbox-level-1 mobileplainbox"},Xt={key:0,class:"navbox-group navbox-cell"},Jt=["title"],Be=Codex.CdxCheckbox,ve=Codex.CdxRadio,Wt=Vue.onBeforeUpdate,Ht=Vue.onMounted,Ie=Vue.reactive,x=Vue.ref,Pe=Vue.watch,Gt=Z(Bt({__name:"Main",props:{recvData:{},recvLevels:{},recvDifficulty:{},preserveElements:{},preserveBeforeElements:{},titleElement:{}},setup(n){const i=Se,{saveOptionsToStorage:a,loadOptionsFromStorage:u}=i,d=n,v=x(d.recvData),w=x(d.recvLevels),E=d.recvDifficulty;function k(t,e){for(const r of t){const o=r.page;r.difficulty=e[o]}}k(v.value,E);const c=Ie({type:p({hans:"Á±ªÂûã",hant:"È°ûÂûã"}),era:p({hans:"Êó∂Êúü",hant:"ÊôÇÊúü"}),stars:p({hans:"ÊòüÊï∞",hant:"ÊòüÊï∏"}),version:p({hans:"ÁâàÊú¨",hant:"ÁâàÊú¨"}),present:p({hans:"Â•ñÂä±ÊñπÂºè",hant:"ÁçéÂãµÊñπÂºè"}),year:p({hans:"Âπ¥‰ªΩ",hant:"Âπ¥‰ªΩ"}),completeDifficulty:p({hans:"ÂÆåÊàêÈöæÂ∫¶",hant:"ÂÆåÊàêÈõ£Â∫¶"}),perfectDifficulty:p({hans:"ÂÆåÁæéÈöæÂ∫¶",hant:"ÂÆåÁæéÈõ£Â∫¶"}),none:p({hans:"Êó†",hant:"ÁÑ°"})});Pe(c,()=>{Promise.resolve().then(I)});const m=Ie({num:p({hans:"ÁºñÂè∑",hant:"Á∑®Ëôü"}),name:p({hans:"ÂêçÁß∞",hant:"ÂêçÁ®±"}),stars:p({hans:"ÊòüÊï∞",hant:"ÊòüÊï∏"}),date:p({hans:"Êó•Êúü",hant:"Êó•Êúü"}),completeDifficulty:p({hans:"ÂÆåÊàêÈöæÂ∫¶",hant:"ÂÆåÊàêÈõ£Â∫¶"}),perfectDifficulty:p({hans:"ÂÆåÁæéÈöæÂ∫¶",hant:"ÂÆåÁæéÈõ£Â∫¶"}),default:p({hans:"ÈªòËÆ§",hant:"È†êË®≠"})});Pe(m,()=>{Promise.resolve().then(I)});const s={asc:"ÂçáÂ∫è",desc:"ÈôçÂ∫è"},l=u();function _(t){return t in m}function y(t){return t in s}const b=x(l?.grouping1??"type"),O=x(l?.grouping2??"stars"),Me=(t,e)=>t in c?t:e,oe=x(l?.direction&&y(l.direction)?l.direction:"asc"),U=x(!1),F=x(l?.showsBirthday??!1),Ae=["default","num","date","name","stars"],q=x(l?.sortingPriority??Ae),Qt=t=>t.some(e=>!_(e))?Ae:(t.length!==Object.keys(m).length&&t.push(...Object.keys(m).filter(e=>!t.includes(e))),t),z=x(null),X=x(null),R=x({});Ht(()=>{if(X.value&&d.preserveBeforeElements?.length){let t=X.value;d.preserveBeforeElements.forEach(e=>{e&&t.parentNode&&(t.parentNode.insertBefore(e,t),t=e)})}if(z.value&&d.preserveElements?.length){let t=z.value;d.preserveElements.forEach(e=>{e&&t&&t.parentNode&&(t.parentNode.insertBefore(e,t.nextSibling),t=e)})}z.value&&z.value.remove(),X.value&&X.value.remove(),I()});function en(t){return je[t]||(()=>0)}function Te(t,e){const r=Qt(q.value);for(let o=0;o<r.length;o++){const f=en(r[o])(t,e);if(f!==0)return f*(oe.value==="asc"?1:-1)}return 0}function Fe(t,e){return Array.isArray(t)?t[e]:t}function re(t,e){const r=t.difficulty,o=Fe(r[e],0);return o?typeof o=="string"?parseInt(o):Math.floor(o):t.stars}function se(t,e){const r=t.difficulty,o=Fe(r[e],0);return o?typeof o=="string"?parseInt(o)-.01:o:t.stars-.01}const Re={era(t){return[{group:"Ëæ£Ê§í",list:t.filter(e=>e.type==="ÂÆòÊñπ"&&e.num<=7)},{group:p({hans:"ÁåéË±π",hant:"ÁçµË±π"}),list:t.filter(e=>e.type==="ÂÆòÊñπ"&&e.num>7&&e.num<=94)},{group:p({hans:"Á±≥È∫¶",hant:"Á±≥È∫•"}),list:t.filter(e=>e.type==="ÂÖ±Âàõ"||e.type==="ÂÆòÊñπ"&&e.num>94)}]},version(t){const e=new Set;return t.forEach(o=>e.add(o.inVer.substring(0,1))),e.delete("3"),Array.from(e).sort((o,f)=>o.localeCompare(f)).map(o=>({group:o==="2"?"2.x / 3.x":o+".x",list:o==="2"?t.filter(f=>f.inVer.startsWith("2")||f.inVer.startsWith("3")):t.filter(f=>f.inVer.startsWith(o))}))},type(t){return[{group:"ÂÆòÊñπ",list:t.filter(e=>e.type==="ÂÆòÊñπ")},{group:Ze(),list:t.filter(e=>e.type==="ÂÖ±Âàõ")}]},stars(t){const e=new Set;return t.forEach(o=>e.add(o.stars)),Array.from(e).sort((o,f)=>o-f).map(o=>({group:B(o.toString())+"Êòü",list:t.filter(f=>f.stars===o)}))},year(t){const e=new Set;t.forEach(f=>e.add(f.inDate.substring(0,4)));const r=new Set;return e.forEach(f=>{f.trim()===""&&r.add(f)}),r.forEach(f=>e.delete(f)),Array.from(e).sort((f,_e)=>parseInt(f)-parseInt(_e)).map(f=>({group:f,list:t.filter(_e=>_e.inDate.startsWith(f))}))},present(t){const e=t.filter(o=>!["crown","present","none"].includes(o.award)),r=[{group:"ÁöáÂÜ†",list:t.filter(o=>o.award==="crown")},{group:"Á•ûÁßòÁÆ±",list:t.filter(o=>o.award==="present")},{group:p({hans:"Êó†",hant:"ÁÑ°"}),list:t.filter(o=>o.award==="none")}];return e.length>0&&r.push({group:p({hans:"Êú™Áü•",hant:"Êú™Áü•"}),list:e}),r},completeDifficulty(t){const e=new Set;for(const r of t)e.add(re(r,0));return Array.from(e).sort((r,o)=>r-o).map(r=>({group:r+".x",list:t.filter(o=>re(o,0)===r)}))},perfectDifficulty(t){const e=new Set;for(const r of t)e.add(re(r,1));return Array.from(e).sort((r,o)=>r-o).map(r=>({group:r+".x",list:t.filter(o=>re(o,1)===r)}))},none(t){return t}},je={num:(t,e)=>t.type===e.type?t.num-e.num:t.type==="ÂÆòÊñπ"?-1:1,name:(t,e)=>t.name.localeCompare(e.name),stars:(t,e)=>t.stars-e.stars,date:(t,e)=>t.inDate.localeCompare(e.inDate),completeDifficulty:(t,e)=>se(t,0)-se(e,0),perfectDifficulty:(t,e)=>se(t,1)-se(e,1),default:(t,e)=>{const r=w.value;return r.indexOf(t.page)-r.indexOf(e.page)}},me=Ot(m,je,q.value,c,Re);function tn(t,e){return Re[e](t)}function ge(t,e){return tn(t,e).map(r=>(r.list=r.list.sort(Te),r))}let Ye=0;const nn=()=>{Ye=0};function Ke(){a({grouping1:b.value,grouping2:O.value,sortingPriority:q.value,direction:oe.value,showsBirthday:F.value})}function I(){console.log("Sorting...");const t=Me(b.value,"type"),e=Me(O.value,"stars");t===e&&e!=="none"&&(O.value=t==="stars"?"type":"stars"),t==="none"&&(O.value="none"),Ke();const r=v.value;if(t==="none"){R.value=[...r].sort(Te);return}else e==="none"?R.value=ge(r,t):R.value=ge(r,t).map(o=>(o.list=ge(o.list,e),o))}function he(){return++Ye%2?"navbox-odd":"navbox-even"}async function ye(){const{levels:t,data:e,difficulty:r}=await i.hotPurge();t?w.value=t:mw.notify(p({hans:"Ëé∑ÂèñÂêàÊ≥ïÂÖ≥Âç°ÂàóË°®Â§±Ë¥•„ÄÇ",hant:"Áç≤ÂèñÂêàÊ≥ïÈóúÂç°ÂàóË°®Â§±Êïó„ÄÇ"}),{type:"error"}),e?v.value=k(e,r):mw.notify(p({hans:`Ëé∑ÂèñÂÖ≥Âç°${G("Cargo")}Êï∞ÊçÆÂ§±Ë¥•„ÄÇ`,hant:`Áç≤ÂèñÈóúÂç°${G("Cargo")}Êï∏ÊìöÂ§±Êïó„ÄÇ`}),{type:"error"}),(t||e)&&mw?.notify?.(p({hans:`Êï∞ÊçÆÂ∑≤Êõ¥Êñ∞„ÄÇ${B(v.value.length)}Êù°Êï∞ÊçÆËÆ∞ÂΩïÔºå${B(w.value.length)}‰∏™ÂÖ≥Âç°„ÄÇ`,hant:`Êï∏ÊìöÂ∑≤Êõ¥Êñ∞„ÄÇ${B(v.value.length)}Ê¢ùÊï∏ÊìöË®òÈåÑÔºå${B(w.value.length)}ÂÄãÈóúÂç°„ÄÇ`})),I()}Wt(()=>{nn()});const we=p({hans:"ÂÖ≥",hant:"Èóú"});return(t,e)=>(h(),V(L,null,[N("div",{ref_key:"markerBefore",ref:X},null,512),N("div",It,[C(S(g(p)({hans:`Êú¨Êô∫ËÉΩÊéíÂ∫è‰∏∫ÂÆûÈ™åÊÄßÂäüËÉΩ„ÄÇÂΩìÂâçËé∑ÂèñÂà∞${g(G)(v.value.length)}‰∏™ÂÖ≥Âç°ÁöÑÊï∞ÊçÆ„ÄÇ`,hant:`Êú¨Êô∫ËÉΩÊéíÂ∫èÁÇ∫ÂØ¶È©óÊÄßÂäüËÉΩ„ÄÇÁï∂ÂâçÁç≤ÂèñÂà∞${g(G)(v.value.length)}ÂÄãÈóúÂç°ÁöÑÊï∏Êìö„ÄÇ`}))+" Ôºà",1),N("a",{onClick:ye,onKeydown:[De(Ce(ye,["prevent"]),["enter"]),De(Ce(ye,["prevent"]),["space"])],role:"button",tabindex:"0"},S(g(p)({hans:"Ê∏ÖÈô§ÁºìÂ≠ò",hant:"Ê∏ÖÈô§Âø´Âèñ"})),41,Pt),e[8]||(e[8]=C("Ôºâ ",-1))]),N("div",Mt,[N("div",At,[C(S(g(p)({hans:"‰∏ÄÁ∫ßÂàÜÁªÑÔºö",hant:"‰∏ÄÁ¥öÂàÜÁµÑÔºö"}))+" ",1),(h(!0),V(L,null,T(c,(r,o)=>(h(),Oe(g(ve),{"model-value":b.value,"onUpdate:modelValue":[e[0]||(e[0]=f=>b.value=f),I],"input-value":o,name:"grouping1",inline:!0},{default:K(()=>[C(S(c[o]),1)]),_:2},1032,["model-value","input-value"]))),256))]),N("div",Tt,[C(S(g(p)({hans:"‰∫åÁ∫ßÂàÜÁªÑÔºö",hant:"‰∫åÁ¥öÂàÜÁµÑÔºö"}))+" ",1),(h(!0),V(L,null,T(c,(r,o)=>(h(),Oe(g(ve),{"model-value":O.value,"onUpdate:modelValue":[e[1]||(e[1]=f=>O.value=f),I],"input-value":o,name:"grouping2",inline:!0,disabled:o!==b.value==(b.value==="none")},{default:K(()=>[C(S(c[o]),1)]),_:2},1032,["model-value","input-value","disabled"]))),256))]),N("div",Ft,[C(S(g(p)({hans:"ÊéíÂ∫èÔºö",hant:"ÊéíÂ∫èÔºö"}))+" ",1),M(Dt,{modelValue:q.value,"onUpdate:modelValue":[e[2]||(e[2]=r=>q.value=r),e[3]||(e[3]=r=>I())],"label-map":m},null,8,["modelValue","label-map"])]),N("div",Rt,[(h(),V(L,null,T(s,(r,o)=>M(g(ve),{name:"direction","input-value":o,"model-value":oe.value,"onUpdate:modelValue":[e[4]||(e[4]=f=>oe.value=f),I],inline:!0},{default:K(()=>[C(S(s[o]),1)]),_:2},1032,["input-value","model-value"])),64))]),N("div",jt,[M(g(Be),{inline:!0,"model-value":U.value,"onUpdate:modelValue":e[5]||(e[5]=r=>U.value=r)},{default:K(()=>[C(S(g(p)({hans:"ÊòæÁ§∫MediaWikiÂéüÁîüÂºπÂá∫Ê°Ü",hant:"È°ØÁ§∫MediaWikiÂéüÁîüÂΩàÂá∫Ê°Ü"})),1)]),_:1},8,["model-value"]),M(g(Be),{inline:!0,"model-value":F.value,"onUpdate:modelValue":[e[6]||(e[6]=r=>F.value=r),e[7]||(e[7]=r=>Ke())]},{default:K(()=>[C(S(g(p)({hans:"Ê†áËÆ∞ÁîüÊó•Âú®‰ªäÊó•ÔºàUTC+8ÔºâÁöÑÂÖ≥Âç°",hant:"Ê®ôË®òÁîüÊó•Âú®‰ªäÊó•ÔºàÊåâUTC+8ÔºâÁöÑÈóúÂç°"})),1)]),_:1},8,["model-value"])])]),b.value==="none"?(h(),V("div",{key:0,class:fe("navbox-list navbox-sole-row "+he())},[M(pe,{levels:R.value,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":g(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)):(h(),V(L,{key:1},[O.value==="none"?(h(!0),V(L,{key:0},T(R.value,r=>(h(),V(L,null,[N("div",Yt,[N("span",{class:"navbox-group-flex-inner",title:`${g(B)(r.list.length)}${g(we)}`},S(r.group),9,Kt)]),N("div",{class:fe("navbox-list navbox-cell "+he())},[M(pe,{levels:r.list,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":g(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)],64))),256)):(h(!0),V(L,{key:1},T(R.value,r=>(h(),V(L,null,[r.list.length>0?(h(),V("div",Ut,[N("span",{class:"navbox-group-flex-inner",title:`${g(B)(r.list.reduce((o,f)=>o+f.list.length,0))}${g(we)}`},S(r.group),9,qt)])):ne("",!0),r.list.length>0?(h(),V("div",zt,[(h(!0),V(L,null,T(r.list,o=>(h(),V(L,null,[o.list.length>0?(h(),V("div",Xt,[N("span",{class:"navbox-group-flex-inner",title:`${g(B)(o.list.length)}${g(we)}`},S(o.group),9,Jt)])):ne("",!0),o.list.length>0?(h(),V("div",{key:1,class:fe("navbox-list navbox-cell "+he())},[M(pe,{levels:o.list,"uses-mw-native-popup":U.value,"shows-birthday":F.value,"process-popup":g(me)},null,8,["levels","uses-mw-native-popup","shows-birthday","process-popup"])],2)):ne("",!0)],64))),256))])):ne("",!0)],64))),256))],64)),N("div",{ref_key:"mark",ref:z},null,512)],64))}}),[["__scopeId","data-v-b1b3cf36"]]);async function Zt(){const n=Se,{getData:i,getValidLevels:a,getDifficulty:u}=n;try{const[d,v,w]=await Promise.all([i(),a(),u()]);if(!d||!v){mw.notify("Failed to fetch qualified data",{type:"error"});return}const E=document.querySelectorAll(".navlevel-sortable:not(.navlevel-sortable-processed)");$.each(E,async(k,c)=>{He(Array.from(c.querySelectorAll("a[href]")));const m=Array.from(c.querySelectorAll(".navlevel-sortable-preserve")),s=Array.from(c.querySelectorAll(".navlevel-sortable-preserve-before"));[...m,...s].forEach(y=>{y.parentNode&&y.parentNode.removeChild(y)});const l=$(c);l.empty(),l.addClass("navlevel-sortable-processed"),Vue.createApp(Gt,{recvData:d,recvLevels:v,recvDifficulty:w,preserveElements:m,preserveBeforeElements:s,titleElement:c.querySelector(".navbox-title")||document.createElement("div")}).mount(c)})}catch(d){console.error("Failed to initialize NavLevel:",d),mw.notify("Failed to initialize NavLevel: "+d.message,{type:"error"})}}mw.hook("wikipage.content").add(Zt)})();

  
});
